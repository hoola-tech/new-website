{"componentChunkName":"component---src-components-blog-blog-template-js","path":"/blog/dev-diary-march-update-node-js-serverless-cms-7555bb50cdbc","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"slug\": \"blog/dev-diary-march-update-node-js-serverless-cms-7555bb50cdbc\",\n  \"title\": \"Dev Diary: March Update â€” Node.js Serverless CMS\",\n  \"description\": \"Update on our development progress.\",\n  \"tags\": [\"Serverless\", \"GraphQL\", \"Javascript\", \"Reactjs\", \"Nodejs\"],\n  \"featureImage\": \"./assets/dev-diary-march-update-node-js-serverless-cms-7555bb50cdbc/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpeg\",\n  \"author\": \"sven\",\n  \"date\": \"2018-03-13T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"In our previous blog post we announced that we\\u2019re moving 100% to JavaScript, Node.js and Serverless architecture. With this post, we want to provide few updates on how we are progressing with our quest.\"), mdx(\"h3\", {\n    \"id\": \"update-1-repository-organisation--monorepo\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #1: Repository Organisation \\u2014 Monorepo\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-1-repository-organisation--monorepo\",\n    \"aria-label\": \"update 1 repository organisation  monorepo permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Organising the source code is a challenging task, especially when you have multiple packages that feed into the core package.\"), mdx(\"p\", null, \"Having a repository per package might seem like a good idea, but we tried that in the past and this creates an overhead and introduces pain when you are working on multiple packages at the same time and even more work when you decide you need another repo because you just found a new package candidate.\"), mdx(\"p\", null, \"To avoid this pain this time we decided to organise all our packages inside a single repository, but still publish each package individually to NPM. To achieve that we started with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://lernajs.io/\"\n  }, \"Lerna\"), \" and added \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://yarnpkg.com/blog/2017/08/02/introducing-workspaces/\"\n  }, \"Yarn workspaces\"), \" to it.\"), mdx(\"h3\", {\n    \"id\": \"update-2-publishing-and-managing-packages\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #2: Publishing and Managing Packages\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-2-publishing-and-managing-packages\",\n    \"aria-label\": \"update 2 publishing and managing packages permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Lerna and Yarn workspaces allowed us to have many packages grouped by topic (api, client, utils) in a single repository, but the next challenge was managing and publishing those packages to NPM in an automated way.\"), mdx(\"p\", null, \"Introducing \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"semantic-release\"), \", an automated version and package publishing. The idea is simple: write standardized commit messages via \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"commitizen\"), \" which are then parsed by \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"semantic-release\"), \" and the next release type is identified (major/breaking, minor/feature or patch version). Once you have the release type - a new version for your package is generated.\"), mdx(\"p\", null, \"Another cool feature is that \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"semantic-release\"), \" will also generate the full change log for your release notes.\"), mdx(\"p\", null, \"Although \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"semantic-release\"), \" had many of the features required, it had one major drawback for our case, it didn\\u2019t support monorepo project structure. In order to work around that, we had no choice but to eventually write our own release and version management library \\u2014 \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"webiny-semantic-release\"), \". If you run a monorepo of your own, we highly encourage you to check it out. It works with all kinds of project organization, both single package and multi-package and allows easy customization of the entire process or just parts of it.\"), mdx(\"h3\", {\n    \"id\": \"update-3-travis-ci\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #3: Travis CI\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-3-travis-ci\",\n    \"aria-label\": \"update 3 travis ci permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"With the focus on DevOps and Continuous Deployment we aim to have as many tests and as complete test coverage as possible. Using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://travis-ci.org/\"\n  }, \"Travis\"), \" and setting our minimum coverage test threshold to 95% we are building the test foundation that will define our code quality and confidence once we start doing CD.\"), mdx(\"p\", null, \"We are using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://mochajs.org/\"\n  }, \"Mocha\"), \" as the test runner and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"http://chaijs.com/\"\n  }, \"Chai\"), \" as the assertion library. However, we are planning to migrate to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://facebook.github.io/jest/\"\n  }, \"Jest\"), \" at some point as it is a much more versatile and a more all-in-one solution for tests and coverage.\"), mdx(\"h3\", {\n    \"id\": \"update-4-aws-aurora-serverless-switching-from-mongodb\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #4: AWS Aurora Serverless, Switching From MongoDB\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-4-aws-aurora-serverless-switching-from-mongodb\",\n    \"aria-label\": \"update 4 aws aurora serverless switching from mongodb permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"In our previous version of Hoola AI we used MongoDB as the document database, although having our Entity layer sitting in front of your database you never actually interacted with MongoDB directly and in a way never cared about the actual database in the background.\"), mdx(\"p\", null, \"Once AWS announced the serverless version of their Aurora, we knew that this was the right next step. Although MongoDB Atlas is a managed database, it still relies on web servers, and we wanted to get away from that concept.\"), mdx(\"p\", null, \"Replacing MongoDB with Aurora meant designing a new Entity layer and building an SQL query engine, unlike the one we had previously for MongoDB. This was a challenging task, but I\\u2019m happy to announce we successfully delivered on that front and are already migrating the existing business logic to our beloved Entities :)\"), mdx(\"p\", null, \"Our new \", \"[Entity]\", \"(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/Hoola\"\n  }, \"https://github.com/Hoola\"), \" AI/webiny-js/tree/master/packages-utils/webiny-entity) layer supports database drivers as plugins, and the first driver we have created was, of course, a \", \"[MySQL driver]\", \"(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/Hoola\"\n  }, \"https://github.com/Hoola\"), \" AI/webiny-js/tree/master/packages-utils/webiny-entity-mysql).\"), mdx(\"h3\", {\n    \"id\": \"update-5-security\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #5: Security\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-5-security\",\n    \"aria-label\": \"update 5 security permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"With the next Hoola AI release, client authentication will rely on JWT by default, meaning we use what most of the community does. No surprises here. However, if you don\\u2019t like JWT or have your own reasons not to use it, implementing a custom token is a matter of implementing a simple interface.\"), mdx(\"p\", null, \"The security layer, like pretty much any other part of Hoola AI is a very flexible system. It allows multiple identities with different authentication strategies, your custom user classes, custom authentication and authorization middleware, etc. Of course, you will only need to bother with all that if the default implementation is not good enough for you. You can easily replace parts of it or even the entire security app.\"), mdx(\"h3\", {\n    \"id\": \"update-6-flow\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Update #6: Flow\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#update-6-flow\",\n    \"aria-label\": \"update 6 flow permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"As soon as we started using Flow, we realized how easy it is to read the code with type annotations and how easy it is to iterate, change, refactor, etc. even dive into the code written by another developer.\"), mdx(\"p\", null, \"By the end of this migration to node, our code will be entirely covered by Flow because it really helps to stay sane without typing tons of inline comments and it makes spotting even the tiniest errors a breeze.\"), mdx(\"h3\", {\n    \"id\": \"outro\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Outro\", mdx(\"a\", {\n    parentName: \"h3\",\n    \"href\": \"#outro\",\n    \"aria-label\": \"outro permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Overall, we have been quite busy these last few months, and there are a few more months of hard work ahead of us before the first official release.\"), mdx(\"p\", null, \"In the next few months we will primarily focus on writing documentation for some of the packages, as well as slowly progressing into the CMS part of Hoola AI, more work on the UI as well as implementing tools for testing the new UI components. We\\u2019ll talk more about that in our next dev update, so make sure you follow us on Medium and \", \"[GitHub]\", \"(\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/Hoola\"\n  }, \"https://github.com/Hoola\"), \" AI/webiny-js) (\\u2605).\"), mdx(\"p\", null, \"As before, Hoola AI will be released under MIT licence, making it accessible and free to anybody who decides to use it.\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"author":"sven","slug":"blog/dev-diary-march-update-node-js-serverless-cms-7555bb50cdbc","title":"Dev Diary: March Update â€” Node.js Serverless CMS","description":"Update on our development progress.","tags":["Serverless","GraphQL","Javascript","Reactjs","Nodejs"],"date":"March 13, 2018","featureImage":{"publicURL":"/static/e9825e3b1bbc5c40ddee054560bc85a6/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpeg","childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAALABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAEDAgT/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAGOm6z5iwz/xAAYEAEBAAMAAAAAAAAAAAAAAAABABARIf/aAAgBAQABBQILUnTDf//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8BP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8BP//EABQQAQAAAAAAAAAAAAAAAAAAACD/2gAIAQEABj8CX//EABgQAQADAQAAAAAAAAAAAAAAAAABETEQ/9oACAEBAAE/IVNlJjmn/9oADAMBAAIAAwAAABAfH//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQMBAT8QP//EABQRAQAAAAAAAAAAAAAAAAAAABD/2gAIAQIBAT8QP//EABsQAQACAgMAAAAAAAAAAAAAAAEAESExYXGR/9oACAEBAAE/EAqkg4APAQ0G76muXTZuZaHk/9k=","aspectRatio":1.7699115044247788,"src":"/static/e9825e3b1bbc5c40ddee054560bc85a6/14b42/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg","srcSet":"/static/e9825e3b1bbc5c40ddee054560bc85a6/f836f/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 200w,\n/static/e9825e3b1bbc5c40ddee054560bc85a6/2244e/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 400w,\n/static/e9825e3b1bbc5c40ddee054560bc85a6/14b42/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 800w,\n/static/e9825e3b1bbc5c40ddee054560bc85a6/47498/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 1200w,\n/static/e9825e3b1bbc5c40ddee054560bc85a6/0e329/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 1600w,\n/static/e9825e3b1bbc5c40ddee054560bc85a6/d8255/max-3840-1v7VcyqUeiJVAeIX-7Qop4A.jpg 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"blog/dev-diary-march-update-node-js-serverless-cms-7555bb50cdbc"}},"staticQueryHashes":["144257237"]}