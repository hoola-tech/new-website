{"componentChunkName":"component---src-components-blog-blog-template-js","path":"/blog/things-to-avoid-when-writing-cypress-tests","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"slug\": \"blog/things-to-avoid-when-writing-cypress-tests\",\n  \"title\": \"5 Things to Avoid When Writing Cypress Tests\",\n  \"description\": \"Learn how to avoid 5 common mistakes when writing Cypress tests that will ease your end-to-end testing experience\",\n  \"tags\": [\"Cypress\", \"End-to-End testing\", \"Web development\", \"Open source\"],\n  \"featureImage\": \"./assets/things-to-avoid-when-writing-cypress-tests/5-things-to-avoid-when-writing-cypress-tests.png\",\n  \"author\": \"ashu\",\n  \"date\": \"2021-07-26T00:00:00.000Z\"\n};\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\nvar ExternalLink = makeShortcode(\"ExternalLink\");\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"When it comes to testing an application, End-to-End (E2E) testing provides the most confidence and the most bang for the buck.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"346px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/2a238110718f1be2fe5b43b5fc757b4e/8f77f/pyramid.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"86.49999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAAAsTAAALEwEAmpwYAAADQklEQVQ4y42Qy08USRzHfzNNsrs3ObjRdYkRx8fqKhsTPZgNB1CiizjO0iC0ooL4gvD2ATIOQg+IbuSlriZ7WLuBi/FiNJu97HWvq/4B3oyJUjVdXV3DYs90mV9Pj4jxVck336r+1fdTv18DfGDRYz8C0dYB0SIKqV+LXkW0SEuwV6gWAXpoPXzRmtPWgT1UD0QtAiklvCoFoFrkP6pFROrEtmWkvhhIXXHoxbcARFv7eSDRImD17AZ65IcC2rARwSdJ3Rrpq3rVBHZGGzYqC/8++jwQYTgq690XsocbwB6sL2T90efsQqW0eiqyrD+aTbXuLLE6y8BqKw0j8JNQhPDBOqBHNytE/R7o4Q3jtKlE0uM/ZWjT1kzq5HZJD63/e65yGVhd5aFXu74CPt7yEdhADfDRRvzZYVK3BuYqCzeT2tVpoha9JmrRAqkpWiDVq+ZJ7WpJYiui9MgmoI1bFH79NLCE+j5M9cX6qoA2lYRSzdvAOltx3+osk1ZXecrqKrcDWVZn2WurZ/djPtH6Nf/tBLD+A34zS6D4IZASeJWdUCVLqB5LVKNLdHugBpXNndU+hNgJtSCff7vYQC0WfInbZxV26den9shRySdaXX79lMfHznh8rMXj15pxn+XXmhFM7YT6HbtUjblQuuPnHMwxdLAvHwQ2UFPALlSCPXiwCzuwrxxz+VS7dO6cl86NDulMdUh+9bjkY2ckH29x/W4v1/7Ozu3BjMJvdIIw9ByQxWMhdn4vWKd3LGfxAy9ZPCbZxajL+qqyrHdf1nfUxWiW9e1HZVg85rF4zGXdu7aweAybCvtAYQ4Dn2xT+Hgr8Fs9U3yyTfLJdodPtv/Pp1Ad76h9Uf6dNslvdt+zR5vAHm0M5zsMO8YQOMbQDjE9LMXMlaWaHlmqpXUPM46h/4KTCkNXQJjJkDCT6P84ho5F1zF0Ly8/hJodzbm5WHMMPYMZYSafiLu6EoysY5eaQJiZzAiEmEnPvzg9LNMP/5DpB3dk+sFtOf/Xn1LMjMgA4gUZ1z8bercTjPyNY+jPhJmU/os594JzoKFAeh6Wv4PQLGaEkUwJQ1+Jc484pn/JfftyAEP/kBZruudnjaSbc332DUXYvzObqhiXAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"Testing Pyramid\",\n    \"title\": \"Testing Pyramid\",\n    \"src\": \"/static/2a238110718f1be2fe5b43b5fc757b4e/8f77f/pyramid.png\",\n    \"srcSet\": [\"/static/2a238110718f1be2fe5b43b5fc757b4e/772e8/pyramid.png 200w\", \"/static/2a238110718f1be2fe5b43b5fc757b4e/8f77f/pyramid.png 346w\"],\n    \"sizes\": \"(max-width: 346px) 100vw, 346px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"On the contrary, there is no doubt that End-to-End testing is hard, time-consuming, and comes with a bag of issues to solve. But, only if you're using the wrong tool for the job.\"), mdx(\"p\", null, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Enter \", mdx(\"a\", {\n    parentName: \"em\",\n    \"href\": \"https://www.cypress.io\"\n  }, \"Cypress\"), \": Fast, easy, and reliable testing for anything that runs in a browser\"), \".\"), mdx(\"p\", null, \"Cypress helps in solving most of the pain points of End-to-End testing and makes it fun to write tests.\\nBut, there are certain mistakes to be avoided so that you can get the full benefit of working with Cypress.\"), mdx(\"p\", null, \"In this blog post, we'll cover 5 such common mistakes, which should be avoided when writing Cypress tests.\\nSo, without further ado, let's begin!\"), mdx(\"h2\", {\n    \"id\": \"use-id-and-class-for-selecting-element\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Use \", mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"id\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"h2\"\n  }, \"class\"), \" for Selecting Element\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#use-id-and-class-for-selecting-element\",\n    \"aria-label\": \"use id and class for selecting element permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"class\"), \" for selecting element is problematic because they are primarily for behavior and styling purposes, due to which they are subject to change frequently.\\nDoing so result in brittle tests which, you probably don't want.\"), mdx(\"p\", null, \"Instead, you should always try to use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data-cy\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data-testid\"), \".\\nWhy? Because they are specifically for testing purposes, which makes them decoupled to the behavior or styling, hence more reliable.\"), mdx(\"p\", null, \"For example, let's suppose we have an \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"input\"), \" element:\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"html\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"<input\\n  id=\\\"main\\\"\\n  type=\\\"text\\\"\\n  class=\\\"input-box\\\"\\n  name=\\\"name\\\"\\n  data-testid=\\\"name\\\"\\n/>\"), \"\\n        \"), mdx(\"p\", null, \"Instead of using \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"id\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"class\"), \" to target this element for test, use \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"data-testid\"), \":\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"// Don't \\u274C\\ncy.get(\\\"#main\\\").something();\\ncy.get(\\\".input-box\\\").something();\\n\\n// Do \\u2611\\uFE0F\\ncy.get(\\\"[data-testid=name]\\\").something();\"), \"\\n        \"), mdx(\"p\", null, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"What about using text for selecting element?\")), mdx(\"p\", null, \"Sometimes it is necessary to use text such as button label to make an assertion or action.\\nAlthough, it's perfectly fine, keep in mind that, your test will fail if the text changes, which is what you might want if the text is critical for the application.\"), mdx(\"h2\", {\n    \"id\": \"treating-cypress-commands-as-promise\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Treating Cypress Commands as Promise\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#treating-cypress-commands-as-promise\",\n    \"aria-label\": \"treating cypress commands as promise permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Cypress tests are composed of Cypress commands, for example, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.get\"), \" and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.visit\"), \".\\nCypress commands are like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Promise\"), \", but they are not real \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Promise\"), \".\"), mdx(\"p\", null, \"What that means is, we can't use syntax like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async-await\"), \" while working with them. For example:\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"    // This won't work\\n    const element = await cy.get(\\\"[data-testid=element]\\\");\\n\\n    // Do something with element\"), \"\\n        \"), mdx(\"p\", null, \"If you need to do something after a command has been completed, you can do so with the help of the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.then\"), \" command.\\nIt will guarantee that only after the previous command finishes, the next will run.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"    // This works\\n    cy.get(\\\"[data-testid=element]\\\").then($el => {\\n        // Do something with $el\\n    });\\n\"), \"\\n        \"), mdx(\"p\", null, \"Note when using a clause like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"Promise.all\"), \" with Cypress command, it might not work as you expect because Cypress commands are like \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Promise\"), \", but not real \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Promise\"), \".\"), mdx(\"h2\", {\n    \"id\": \"using-arbitrary-waits-in-cypress-tests\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Using Arbitrary Waits in Cypress Tests\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#using-arbitrary-waits-in-cypress-tests\",\n    \"aria-label\": \"using arbitrary waits in cypress tests permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"When writing the Cypress test we want to mimic the behavior of a real user in real-world scenarios.\\nReal-world applications are asynchronous and slow due to things like network latency and device limitations.\"), mdx(\"p\", null, \"When writing tests for such applications we are tempted to use arbitrary values in the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.wait\"), \" command.\\nThe problem with this approach is that, while it works fine in development, it is not guaranteed. Why? Because the underlying system depends upon things like network requests which are asynchronous and nearly impossible to predict.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"    // Might work (sometimes) \\uD83E\\uDD37\\n    cy.get(\\\"[data-testid=element]\\\").performSomeAsyncAction();\\n    // Wait for 1000 ms\\n    cy.wait(1000);\\n    // Do something else after the action is completed\"), \"\\n        \"), mdx(\"p\", null, \"Instead, we should wait for visual elements, for example, completion of loading. Not only does it mimic the real-world use case more closely, but it also gives more reliable results.\\nThink about it, a user using your application mostly likely wait for a visual clue like loading to determine the completion of an action rather than arbitrary time.\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"    // The right way \\u2611\\uFE0F\\n    cy.get(\\\"[data-testid=element]\\\").performSomeAsyncAction();\\n    // Wait for loading to finish\\n    cy.get(\\\"[data-testid=loader]\\\").should(\\\"not.be.visible\\\");\\n    // Now that we know previous action has been completed; move ahead\"), \"\\n        \"), mdx(\"p\", null, \"Cypress commands, for example, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.get\"), \" wait for the element before making the assertion, of course for a predefined \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"timeout\"), \" value which you can \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.cypress.io/guides/references/configuration#Timeouts\"\n  }, \"modify\"), \".\\nThe cool thing about \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"timeout\"), \" is that they will only wait until the condition is met rather than waiting for the complete duration like the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.wait\"), \" command.\"), mdx(\"h2\", {\n    \"id\": \"using-different-domains-within-a-cypress-test\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Using Different Domains Within a Cypress Test\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#using-different-domains-within-a-cypress-test\",\n    \"aria-label\": \"using different domains within a cypress test permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"One limitation of Cypress is that it doesn't allow using more than one domain name in a single test.\"), mdx(\"p\", null, \"If you try using more than one domain in a single test block \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"it(...)\"), \" or \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"test(...)\"), \", Cypress will throw a security warning.\\nThis is the way Cypress has been \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.cypress.io/guides/guides/web-security#Same-superdomain-per-test\"\n  }, \"built\"), \".\"), mdx(\"p\", null, \"With that being said, sometimes there is a requirement to visit more than one domain in a single test. We can do so by splitting our test logic into multiple test blocks within a single test file. You can think of it as a multi-step test, for example,\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"describe(\\\"Test Page Builder\\\", () => {\\n    it(\\\"Step 1: Visit Admin app and do something\\\", {\\n        // ...\\n    });\\n\\n    it(\\\"Step 2: Visit Website app and assert something\\\", {\\n        // ...\\n    });\\n});\"), \"\\n        \"), mdx(\"p\", null, \"We use a similar approach at Hoola AI for testing the \", mdx(ExternalLink, {\n    href: \"https://www.hoola.ai/serverless-app/page-builder/?utm_source=Hoola AI-blog&utm_medium=blog-post&utm_campaign=Regular-content&utm_content=5-things-to-avoid-cypress-tests&utm_term=W00689\",\n    mdxType: \"ExternalLink\"\n  }, \"Page Builder application\"), \".\"), mdx(\"p\", null, \"Few things to keep in mind when writing tests in such a manner are:\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"You cannot rely on persistent storage be it variable in test block or even local storage.\\nWhy? Because, when we issue a Cypress command with a domain other than the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"baseURL\"), \" defined in the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.cypress.io/guides/references/best-practices#Setting-a-global-baseUrl\"\n  }, \"configuration\"), \", Cypress performs a tear-down and does a full reload.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Blocks like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"before\\\"\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"\\\"after\\\"\"), \" will be run for each such test block because of the same issue mentioned above.\"))), mdx(\"p\", null, \"Be mindful of these issues before adapting this approach and adjust the tests accordingly.\"), mdx(\"h2\", {\n    \"id\": \"mixing-async-and-sync-code\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Mixing Async and Sync Code\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#mixing-async-and-sync-code\",\n    \"aria-label\": \"mixing async and sync code permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Cypress commands are asynchronous, and they don't \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"return\"), \" a value but \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"yield\"), \" it.\"), mdx(\"p\", null, \"When we run Cypress it won't execute the commands immediately but read them serially and queue them.\\nOnly after it executes them one by one. So, if you write your tests mixing async and sync code, you will get the wrong results.\\nFor example:\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"it(\\\"does not work as we expect\\\", () => {\\n  cy.visit(\\\"your-application\\\") // Nothing happens yet\\n\\n  cy.get(\\\"[data-testid=submit]\\\") // Still nothing happening\\n    .click() // Nope, nothing\\n\\n  // Something synchronous\\n  let el = Cypress.$(\\\"title\\\") // evaluates immediately as []\\n\\n  if (el.length) {\\n    // It will never run because \\\"el.length\\\" will immediately evaluates as 0\\n    cy.get(\\\".another-selector\\\")\\n  } else {\\n    /*\\n    * This code block will always run because \\\"el.length\\\" is 0 when the code executes\\n    */\\n    cy.get(\\\".optional-selector\\\")\\n  }\\n})\"), \"\\n        \"), mdx(\"p\", null, \"Instead, use our good friend \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"cy.then\"), \" command to run code after the command has been completed. For example,\"), mdx(\"deckgo-highlight-code\", {\n    \"language\": \"js\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"it(\\\"does work as we expect\\\", () => {\\n  cy.visit(\\\"your-application\\\") // Nothing happens yet\\n\\n  cy.get(\\\"[data-testid=submit]\\\") // Still nothing happening\\n    .click() // Nope, nothing\\n    .then(() => {\\n      // placing this code inside the .then() ensures\\n      // it runs after the cypress commands 'execute'\\n      let el = Cypress.$(\\\".new-el\\\") // evaluates after .then()\\n\\n      if (el.length) {\\n        cy.get(\\\".another-selector\\\")\\n      } else {\\n        cy.get(\\\".optional-selector\\\")\\n      }\\n    })\\n})\"), \"\\n        \"), mdx(\"h2\", {\n    \"id\": \"conclusion\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Conclusion\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#conclusion\",\n    \"aria-label\": \"conclusion permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Cypress is a powerful tool for End-to-End testing, but sometimes we make few mistakes which makes the experience not fun.\\nBy avoiding the common mistakes we can make the journey of End-to-End testing smooth and fun.\"), mdx(\"hr\", null), mdx(\"p\", null, \"Thanks for reading! My name is Ashutosh and I work as a full stack developer at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.hoola.ai\"\n  }, \"Hoola AI\"), \".\\nIf you have any questions, comments or just want to connect, feel free to reach out to me via \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.twitter.com/bhardwajashu96\"\n  }, \"Twitter\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"author":"ashu","slug":"blog/things-to-avoid-when-writing-cypress-tests","title":"5 Things to Avoid When Writing Cypress Tests","description":"Learn how to avoid 5 common mistakes when writing Cypress tests that will ease your end-to-end testing experience","tags":["Cypress","End-to-End testing","Web development","Open source"],"date":"July 26, 2021","featureImage":{"publicURL":"/static/589d420386e1c4d8ff67dd29094e1147/5-things-to-avoid-when-writing-cypress-tests.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAC+0lEQVQozx2NW09bBQCAz5OJzzNRE+8NpYwUSgfr6JXeKT2FXmhLOS2ll1MOpxdoiy2DtWUVQcZst4RuZjNREzUxQX3xSZdo4oMme9EXE/XBmPg/PrM9fE/fl3yCXj+J2TyP0+XA7TTjspsIeO0EfA7sVhNiKISsVNht7KPutKjVGzSau1RqZdSywna5SEkpoJQKlIsygsGgx26z4PO5CYmLeFx23C4HouhndHGPvbpCVoohy0USaxJpKYGcS1BVUpQViaoq0awXODis0+kdIozrxpg26LFYbYhiEDG4SEz0cLOp8O8/f/P5Jx/RuVln8OE59d1dTt5/D1kSqWU8JJYXcNpNrAQdrCdDbGbjCFqdjimDAafbi9fnx2U3kwxYqBZWGZweIm8ksFrthMMrbEgJclKcaMBGLRdic30ZcclH0O9AXFxgJWBHmJkxsZaUUNUK3V6Xo+4Bg9MeB60d+rf22H+3wU5jn/7t2zx+MHzuahWVer3O/Xt3GV0MGF0M6dxqsxzyIng8ESLhDNFImmh0jWQqTb6okiuqlJQK7WaZ4UmfnWrz+aBZVYiuSticIrH4s1Yhm9smW6gSjWcQwqk9EpsHZLb65CpnqM0hR70BX3884smXD3nyuMM353u02x8wfPAVo0eXnN79lFprQL5yQlbpk5Z7pPId1gtdhKjUZi3foVg6pLVd47ycYZhzc+TX0HW/QdvyMinNCyz5o9y5uOT7H5/yy9M/+P3P/zg++wylcY5SP2NTPSZV7CLEMm0yuRZxr4+lmas4J97E9PYrzL71KsbXX2L6tStor7zIoi/C/UeXfPfTb/zw61988e3PxBMVCuoRavMOxeoxmVIPwR/eIhjbJrhaJpSosRwvE4zIhONbRJJbuH1x5i1+bAsh/KENAuE8KwkVb3ATbzCNX5QIxWTEqIwvmEbQvDOBRjOOdmwCnfYq+slpDNOzGI3zXDPe4MacBdMzrluZN9u5brJwbdbE7JyFKb2RKf0M+qk5xnVGtGOT/A9AXs6J0YIgTQAAAABJRU5ErkJggg==","aspectRatio":1.7699115044247788,"src":"/static/589d420386e1c4d8ff67dd29094e1147/ee604/5-things-to-avoid-when-writing-cypress-tests.png","srcSet":"/static/589d420386e1c4d8ff67dd29094e1147/69585/5-things-to-avoid-when-writing-cypress-tests.png 200w,\n/static/589d420386e1c4d8ff67dd29094e1147/497c6/5-things-to-avoid-when-writing-cypress-tests.png 400w,\n/static/589d420386e1c4d8ff67dd29094e1147/ee604/5-things-to-avoid-when-writing-cypress-tests.png 800w,\n/static/589d420386e1c4d8ff67dd29094e1147/f3583/5-things-to-avoid-when-writing-cypress-tests.png 1200w,\n/static/589d420386e1c4d8ff67dd29094e1147/5707d/5-things-to-avoid-when-writing-cypress-tests.png 1600w,\n/static/589d420386e1c4d8ff67dd29094e1147/eeb1b/5-things-to-avoid-when-writing-cypress-tests.png 1920w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"blog/things-to-avoid-when-writing-cypress-tests"}},"staticQueryHashes":["144257237"]}