{"componentChunkName":"component---src-components-blog-blog-template-js","path":"/blog/connecting-to-aws-documentdb-from-a-lambda-function-2b666c9e4402","result":{"data":{"mdx":{"body":"var _excluded = [\"components\"];\nfunction _extends() { return _extends = Object.assign ? Object.assign.bind() : function (n) { for (var e = 1; e < arguments.length; e++) { var t = arguments[e]; for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]); } return n; }, _extends.apply(null, arguments); }\nfunction _objectWithoutProperties(e, t) { if (null == e) return {}; var o, r, i = _objectWithoutPropertiesLoose(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (r = 0; r < n.length; r++) o = n[r], -1 === t.indexOf(o) && {}.propertyIsEnumerable.call(e, o) && (i[o] = e[o]); } return i; }\nfunction _objectWithoutPropertiesLoose(r, e) { if (null == r) return {}; var t = {}; for (var n in r) if ({}.hasOwnProperty.call(r, n)) { if (-1 !== e.indexOf(n)) continue; t[n] = r[n]; } return t; }\n/* @jsxRuntime classic */\n/* @jsx mdx */\n\nvar _frontmatter = {\n  \"slug\": \"blog/connecting-to-aws-documentdb-from-a-lambda-function-2b666c9e4402\",\n  \"title\": \"Connecting to AWS DocumentDB from a Lambda function\",\n  \"description\": \"Start your AWS DocumentDB journey by learning how to establish a connection from a Lambda function and a local machine.\",\n  \"tags\": [\"AWS\", \"Serverless\", \"DocumentDB\", \"MongoDB\", \"NodeJS\"],\n  \"featureImage\": \"./assets/connecting-to-aws-documentdb-from-a-lambda-function-2b666c9e4402/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png\",\n  \"author\": \"adrian\",\n  \"date\": \"2019-01-24T00:00:00.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n    props = _objectWithoutProperties(_ref, _excluded);\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Few weeks ago, AWS announced their own NoSQL, MongoDB-compatible database called \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://aws.amazon.com/documentdb/\"\n  }, \"DocumentDB\"), \".\"), mdx(\"p\", null, \"I must say, as a fan of MongoDB, I was immediately pumped! \\uD83E\\uDD17\"), mdx(\"undefined\", null, mdx(\"blockquote\", {\n    \"className\": \"twitter-tweet\",\n    \"data-dnt\": \"true\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\",\n    \"lang\": \"en\",\n    \"dir\": \"ltr\"\n  }, \"My life is now complete \\uD83E\\uDD13 \\uD83D\\uDE03 \\uD83E\\uDD18\", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/hashtag/aws?src=hash&ref_src=twsrc%5Etfw\"\n  }, \"#aws\"), mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://t.co/Szs4B9o8OP\"\n  }, \"https://t.co/Szs4B9o8OP\")), \"\\u2014 Adrian Smijulj (@adrians5j) \", mdx(\"a\", {\n    parentName: \"blockquote\",\n    \"href\": \"https://twitter.com/adrians5j/status/1083368723250139137?ref_src=twsrc%5Etfw\"\n  }, \"January 10, 2019\")), \"\\n\\n\"), mdx(\"p\", null, \"Okay, maybe that statement was a bit exaggerated \\uD83E\\uDD2A. But yeah, I\\u2019ve always wanted to have a \\u201Cnatively supported\\u201D MongoDB in the AWS cloud. I was actually secretly hoping this would happen when I saw that MongoDB was a platinum sponsor of the AWS re:Invent 2018, but at the time that did not happen.\"), mdx(\"p\", null, \"Well, now it\\u2019s here and my team and I immediately started playing with it, primarily to see how it performs in conjunction with Lambda functions and to determine if it would be a good fit for us here at Hoola AI.\"), mdx(\"p\", null, \"After I\\u2019d \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/documentdb/latest/developerguide/getting-started.launch-cluster.html\"\n  }, \"created\"), \" a basic DocumentDB cluster, the natural step was to try to connect to it. But, in order to do that, I soon realized there are a few things you need to know and take care of first.\"), mdx(\"p\", null, \"So, in this post, I wanted to show you how to connect to a DocumentDB inside of your Lambda functions (using Node.js runtime) and also, as a small bonus (who doesn\\u2019t love bonuses \\uD83D\\uDE04), how to do the same from your local machine.\"), mdx(\"p\", null, \"Let\\u2019s dig in!\"), mdx(\"h2\", {\n    \"id\": \"before-we-start\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Before We Start\\u2026\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#before-we-start\",\n    \"aria-label\": \"before we start permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"There are a couple of things you should consider before connecting to your DocumentDB cluster.\"), mdx(\"p\", null, \"First of all, it is always deployed inside of a VPC. This means there isn\\u2019t a public endpoint via which you can connect from the outside world. For example, you cannot just connect to your cluster directly from your machine.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Amazon DocumentDB is virtual private cloud (VPC)-only and does not currently support public endpoints. Thus, you can\\u2019t connect directly to your Amazon DocumentDB cluster from outside of your VPC.\")), mdx(\"p\", null, \"Amazon DocumentDB is virtual private cloud (VPC)-only and does not currently support public endpoints. Thus, you can\\u2019t connect directly to your Amazon DocumentDB cluster from outside of your VPC.\"), mdx(\"p\", null, \"Also, upon connecting, except the usual username and password, you must also use a public key they provide in the form of a \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" file.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"By default, a newly created Amazon DocumentDB cluster only accepts secure connections using Transport Layer Security (TLS). Before you can connect using TLS, you first need to download the public key for Amazon DocumentDB.\")), mdx(\"p\", null, \"By default, a newly created Amazon DocumentDB cluster only accepts secure connections using Transport Layer Security (TLS). Before you can connect using TLS, you first need to download the public key for Amazon DocumentDB.\"), mdx(\"p\", null, \"So make sure to \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/documentdb/latest/developerguide/getting-started.connect.html\"\n  }, \"download\"), \" it before continuing. For more information on this topic, you can visit the official \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.aws.amazon.com/documentdb/latest/developerguide/security.encryption.ssl.html\"\n  }, \"AWS\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://docs.mongodb.com/manual/tutorial/configure-ssl/#pem-file\"\n  }, \"MongoDB\"), \" docs.\"), mdx(\"p\", null, \"Alright, now we have everything we need to know. Let\\u2019s see how to connect to DocumentDB from a Lambda function.\"), mdx(\"h2\", {\n    \"id\": \"establishing-a-connection-from-a-lambda-function\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Establishing a Connection From a Lambda Function\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#establishing-a-connection-from-a-lambda-function\",\n    \"aria-label\": \"establishing a connection from a lambda function permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Code-wise, the cool thing about DocumentDB is that you don\\u2019t have to install any additional JS libraries or SDKs. You use it like you would use a regular MongoDB, via the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/mongodb\"\n  }, \"official NodeJS mongodb package\"), \".\"), mdx(\"p\", null, \"So, setting up a connection shouldn\\u2019t be much of a problem if you\\u2019ve already done it before. You only have to make sure to pass the connection URI and the public key correctly into the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"MongoClient.connect\"), \" method.\"), mdx(\"p\", null, \"You can find the connection URI in the AWS DocumentDB Console:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"652px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/e591710d28fce6bab7b2e74b9eb45c42/dba9a/max-1304-14d9nOiaP8kPklY5jKg7IBQ.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"91.49999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACfUlEQVQ4y4WTC4+cIBSF/f+/rcnO6nbw/VbEkZe8RTutTts02Wz65Qg3EbiEnBNwziGcEJrNJ+zXOGuVUgGlrCjrtuv2C+9P7fv5bV/jvdfGBJv3z+fzOA7r7NnLuUtnfRzH8xM/Lj2fT+tcoJRqu3ZCE0JomqZhGPt+gHBq2w5jIqUSJ1IpvfLVOXfd7sRaFyhjQJykWZHnRZbnaV7c4wTEaVU3H9/vd5AkaXYH8R0kH9/vZd00Xdd0PaHs7Oy3bej7OE6KosyyvGnbaUJplnd9X9d1UZZVVWVpnqQZxphQ+liWZcFSyrNzNIs3yMKJv0/8BtkNnsW3Dt8gz1efrT4Xe3YVmdgLsediL+UO2JYTFbyPrK7qsm66fqiapu2GfhzzsirrFj2WecETmh+YYEIXTBZCT2FMhI5mEdwRTwC43UIA4tstDMMoDKO3t9v9DsIweg+jKPpIsgzEKQAxiJMo+gAAIEzAQwQhWvtxKpq+6se0aqp+PNWNCFOuLZOaa0OEolJzZZjUVOpV6YfQIRJBzUwl9kbutdwbdZTcFdwVzOXM/hb9VDCbUjswFTBKiqLM86KuqrKopBR+c965c/xau9+s0QFf1xFOE5onNA8jFEpt3v9Xft+V1oE25vSjdeYypjHmr4HdP2Z2l14L3LYJKYWUgXXudOwfjh/Hy/fbth3H8XfzcWGt1UpZZyllqxABZ6xtu67r+n54TVprIaQQAiH0yqZSaoRwgNAY8zrXWiuVOoPxWOiCKaEME8r56v3++s05t9Z6751zhBBC6ZW6k9+R5EJ1j7Vf1gGLmSu/79a5zftViDNo82yuJiOEC8bTjAY4jhAaa3892E8Sz/AQtZuQigAAAABJRU5ErkJggg==')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1304 14d9nOiaP8kPklY5jKg7IBQ\",\n    \"title\": \"max 1304 14d9nOiaP8kPklY5jKg7IBQ\",\n    \"src\": \"/static/e591710d28fce6bab7b2e74b9eb45c42/dba9a/max-1304-14d9nOiaP8kPklY5jKg7IBQ.png\",\n    \"srcSet\": [\"/static/e591710d28fce6bab7b2e74b9eb45c42/772e8/max-1304-14d9nOiaP8kPklY5jKg7IBQ.png 200w\", \"/static/e591710d28fce6bab7b2e74b9eb45c42/e17e5/max-1304-14d9nOiaP8kPklY5jKg7IBQ.png 400w\", \"/static/e591710d28fce6bab7b2e74b9eb45c42/dba9a/max-1304-14d9nOiaP8kPklY5jKg7IBQ.png 652w\"],\n    \"sizes\": \"(max-width: 652px) 100vw, 652px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Note that for our case, you only need \\u201Cthe base\\u201D of the connection URI in the \\u201CConnect to this cluster with an application\\u201D section. Basically, you just leave out the extra query parameters (since the Node.js mongodb driver will take care of the rest), like so:\"), mdx(\"deckgo-highlight-code\", {\n    \"highlight-lines\": \"undefined\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"mongodb://some_user:some_password@webiny-cloud.cluster-some-id.us-east-2.docdb.amazonaws.com:27017\"), \"\\n        \"), mdx(\"p\", null, \"And of course, don\\u2019t forget to replace \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"<insertYourPassword>\"), \" with your actual password.\"), mdx(\"p\", null, \"Alright, now, let\\u2019s see how to use the connection URI and downloaded certificate in our code:\"), mdx(\"deckgo-highlight-code\", {\n    \"highlight-lines\": \"undefined\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"import { MongoClient } from \\\"mongodb\\\";\\nimport caBundle from \\\"raw-loader!./path/to/rds-combined-ca-bundle.pem\\\";\\n\\nlet cachedDb = null;\\n\\nfunction connectToDatabase() {\\n    if (cachedDb) {\\n        return Promise.resolve(cachedDb);\\n    }\\n\\n    return MongoClient.connect(\\n        process.env.MONGODB_URI,\\n        { ssl: true, sslCA: caBundle }\\n    ).then(db => {\\n        cachedDb = db;\\n        return cachedDb;\\n    });\\n}\\n\\nexport const handler = async (event, context) => {\\n    const db = await connectToDatabase();\\n    // Do something with it...\\n};\"), \"\\n        \"), mdx(\"p\", null, \"Please note that, in my development flow, my code is compiled with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://babeljs.io/\"\n  }, \"Babel\"), \" so there are things like \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"async\"), \", \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"await\"), \", and \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"import\"), \". I\\u2019m also using \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://webpack.js.org/\"\n  }, \"Webpack\"), \", which enables me to use \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://github.com/webpack-contrib/raw-loader\"\n  }, \"raw-loader\"), \". With it, I can conveniently import the \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" file the same way I would any other \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".js\"), \" file. But, if you don\\u2019t use Webpack in your development flow, you can just copy/paste the whole content of the downloaded \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".pem\"), \" file into a single \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".js\"), \" file, like so:\"), mdx(\"deckgo-highlight-code\", {\n    \"highlight-lines\": \"undefined\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"export default `-----BEGIN CERTIFICATE-----MIID9DCCAtygAwIBAgIBQjANBgkqhkiG9w0BAQUFADCBijELMAkGA1UEBhMCVVMxEzARBgNVBAgMCldhc2hpbmd0b24xEDAOBgNVBAcMB1NlYXR0bGUxIjAgBgNVB...`;\"), \"\\n        \"), mdx(\"p\", null, \"Also, make sure to use \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/dotenv\"\n  }, \"dotenv\"), \" if you\\u2019re not already, since using the environment variables is the most reliable and secure method for storing sensitive configuration values.\"), mdx(\"p\", null, \"Alright, we are ready to test our Lambda function inside the AWS!\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"461px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/a27907d8abdc4679139987ef0dfcd850/f816d/max-922-1xKwXQm_svYdSxOo2gitx1w.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"75.99999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADNUlEQVQoz2P49+/f////f/36defOnYcPH965c+fGjRs3b95ct3rFxQvnHj58eP78+SdPnty9e/fq1avXweDDhw////3/+/cvw9+/f//////t27czZ85cu3bt1KlTBw4cOHXqdFZGamdby40b10+cOHnjxo2DBw8eOXLkwIEDR48e/fjx4/9////8/s0Asfnv37/v37//+PHjrdu3t62af+3g+nm9VToq0o5WJof37/78+fPr12/evXv3/v37Dx8+/P3799+/f3/+/IFqhgAIe9+6RYvbck+tnbhqYoW2gnR+WtT1M3t/ff8EUQJXCdKMrPPPnz////+/fPpYe07Elmnl81qyC5PDexqL60uzQgL8du7cCXEjRD3Iz/8xwNGDe4qSAv3sDdzMNOKCXeNDPayMNZ3tzB1trLds2oSsH1kzyEkH9+w4vGNNTJCbiLCQnIx0ZlJkUribkrTQmsWTY0J94kK8X714BvcgA7Jvv337tnjOpPraCiV5OVV56Zjw4A3LptkaqxVnRFYWZXo4mCdH+Ny6fgWkHhxmKJpfvnieFBfZUl2WFuGfGRWUGR9uZaZvYahWlBZuZaRpa2bAwsJSX1f3////P2AA1QwJqr6+3vSkhC93z3eWZiaG+jlZGstKS0UEeob4ONqY6ikpyPFyc5mamPz8+fPfv7+/fv0ERRXE2p8/f1paWbfWVq+d3unpYG2qr2Wsq5WbFufsYCsiJGBtbiQsLKSoIMfPx3v82LH///9/+vSJ4ScY/P//v7e3R1ZWsb6y6unFY1X5GWrKikry8oL8vBoq8goyErw83GIiguKiwgwMDDnZmRfPH6uuTGV48+bN48eP79+/n52VlZiY2t7aemL3xtVLFnZ09jnaO9jbO0SF+menJ1lZWQUHBQQH+ltbWYUGB1YURifHWTE8ePDgwoULp0+f/vLly5kzp8+cOXPg4MFz58+fPnOmo6Pj3r17EydOOH/+wt27dz9//vzx48fHjx99+vxt65ZlyQlmDEePHt2yZUtvX19Bfn5aWlpOTk5bW3t1RVlJcVFYWGhiQoKTk2NcXExkZGRsbGxOTnZMTHR0dGxtTV5vRxIAAENLvZp0NFsAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 922 1xKwXQm svYdSxOo2gitx1w\",\n    \"title\": \"max 922 1xKwXQm svYdSxOo2gitx1w\",\n    \"src\": \"/static/a27907d8abdc4679139987ef0dfcd850/f816d/max-922-1xKwXQm_svYdSxOo2gitx1w.png\",\n    \"srcSet\": [\"/static/a27907d8abdc4679139987ef0dfcd850/772e8/max-922-1xKwXQm_svYdSxOo2gitx1w.png 200w\", \"/static/a27907d8abdc4679139987ef0dfcd850/e17e5/max-922-1xKwXQm_svYdSxOo2gitx1w.png 400w\", \"/static/a27907d8abdc4679139987ef0dfcd850/f816d/max-922-1xKwXQm_svYdSxOo2gitx1w.png 461w\"],\n    \"sizes\": \"(max-width: 461px) 100vw, 461px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"I assume you already got the \\u201Cdeployment\\u201D part figured out. If not, \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://serverless.com/\"\n  }, \"serverless framework\"), \" is certainly a great way to do it.\"), mdx(\"p\", null, \"If we try to run our deployed function via the Lambda Management Console, you will notice that it times-out!\"), mdx(\"p\", null, \"Well, the DocumentDB connection cannot be established because, as already mentioned, our Lambda function and DocumentDB cluster must reside in the same VPC. To do that, just scroll down to the Network section and select the correct VPC, its subnets, and an adequate security group.\"), mdx(\"p\", null, \"In my case, I had everything set up in my default VPC:\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"687px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/91e90f1b21c63997dcb5d53f21e1b7a7/aec65/max-1374-1vCwlyd7lByGmFojW9r3pJw.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"88.99999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAACT0lEQVQ4y42Se2+bMBTF8/2/06RubdetiZomaR4tSYCACQ9jA34A9rWZTDNVyvLHLkdXB8RPXHzPpG1bSipKq7quKSF1w1tlhv+rSdM0QXhCKIniOI4ROmdpjnul7DCYz7KugTFawzWslMoLjMuyJKSq65KQPCsYF9baC2qtsY4UUl7DjPM0TTXA59t2LPcpAA2gLwUAcGPsqq79wE+zDCUoy/PknGCMuRANY4xzxnlV19wZprW+hgFMr3WvVNdf1CutYfxJY0ZjYRzkxthYdG9RsYmyXYL3Gd0hvD5lW1TsEN6iYhs7c6Lc3jxtIvttnL9HqZfgY0b3abmLMg8VH6jwEvwe5/uMnht5e1VYdPMjmnunhY/ewnTpJy/eaXFEyyBZ+Oj1EC+DxC+b27BUGjcCN6KSHVfAe2CdYp3mClzv3ROp7W2YUno8+kEYFkUhBOeMScH/nvQoxqrK5c/8s61Jw5okPSfpOUYoPEURQhGKz1lGaOWuuioJJZQSQhhj17AGcKvSWgE4adCgjbmOt7W27bpruJT9Ijhv4mIdZcswPZYMXMyGMZWjLgn9rMFpJI21k7qFoJQFVzlXGeuw1FVnaAtEguvtxRMJpdClUKVQmKu8aUkLk0YNHxm7e5z+nC3unmYP09f76eJxevE/nl/vn+ffHp4fZ8vZavf0svo933z/9bL1Y9LZCettIdTKC98OkdP+tD7EKy/c+GgbJOtjvPHRfHfw4qKUUHBVCKdKD1jCpAfLlVHD0NtBDV/6urVOnRmktq22cpRQRirzB+29AFS0LRk5AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1374 1vCwlyd7lByGmFojW9r3pJw\",\n    \"title\": \"max 1374 1vCwlyd7lByGmFojW9r3pJw\",\n    \"src\": \"/static/91e90f1b21c63997dcb5d53f21e1b7a7/aec65/max-1374-1vCwlyd7lByGmFojW9r3pJw.png\",\n    \"srcSet\": [\"/static/91e90f1b21c63997dcb5d53f21e1b7a7/772e8/max-1374-1vCwlyd7lByGmFojW9r3pJw.png 200w\", \"/static/91e90f1b21c63997dcb5d53f21e1b7a7/e17e5/max-1374-1vCwlyd7lByGmFojW9r3pJw.png 400w\", \"/static/91e90f1b21c63997dcb5d53f21e1b7a7/aec65/max-1374-1vCwlyd7lByGmFojW9r3pJw.png 687w\"],\n    \"sizes\": \"(max-width: 687px) 100vw, 687px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"Now, if you try to run the same function again, the connection should be established successfully!\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"400px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/fe4795d77244b58aa5589160e2660d97/066f9/max-800-01G9mrCEkdWaKJTHX.jpg\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"100%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAAUABQDASIAAhEBAxEB/8QAGAABAAMBAAAAAAAAAAAAAAAAAAIDBAH/xAAXAQADAQAAAAAAAAAAAAAAAAAAAQID/9oADAMBAAIQAxAAAAHdhhzSalC1bIVZgH//xAAZEAADAQEBAAAAAAAAAAAAAAAAAQISAxH/2gAIAQEAAQUCLcnoqo6S8aPWh9royf/EABcRAAMBAAAAAAAAAAAAAAAAAAAQETH/2gAIAQMBAT8B0j//xAAWEQEBAQAAAAAAAAAAAAAAAAABEDH/2gAIAQIBAT8BdjP/xAAaEAABBQEAAAAAAAAAAAAAAAABAAIQESES/9oACAEBAAY/AkYy11Ult4Y//8QAHBABAAICAwEAAAAAAAAAAAAAAQARIWExQYGR/9oACAEBAAE/IfL1F1DN8/IyRprRAdgbSupXcGWOeIQgozRKbn//2gAMAwEAAgADAAAAEAgwPv/EABcRAAMBAAAAAAAAAAAAAAAAAAABERD/2gAIAQMBAT8QTgkWf//EABYRAQEBAAAAAAAAAAAAAAAAAAEQEf/aAAgBAgEBPxBmYCf/xAAdEAEBAAIDAAMAAAAAAAAAAAABEQAhMUFhgZGh/9oACAEBAAE/EGas72lyAcwkIJtv4fvBHRTLRgXk0eY1CoGicFXxJh2gxnMhT484XIoAlFV/c284/9k=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 800 01G9mrCEkdWaKJTHX\",\n    \"title\": \"max 800 01G9mrCEkdWaKJTHX\",\n    \"src\": \"/static/fe4795d77244b58aa5589160e2660d97/066f9/max-800-01G9mrCEkdWaKJTHX.jpg\",\n    \"srcSet\": [\"/static/fe4795d77244b58aa5589160e2660d97/e07e9/max-800-01G9mrCEkdWaKJTHX.jpg 200w\", \"/static/fe4795d77244b58aa5589160e2660d97/066f9/max-800-01G9mrCEkdWaKJTHX.jpg 400w\"],\n    \"sizes\": \"(max-width: 400px) 100vw, 400px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"h2\", {\n    \"id\": \"connection-management\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Connection Management\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#connection-management\",\n    \"aria-label\": \"connection management permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"In a serverless world, connection management is unfortunately still something that might give you headaches.\"), mdx(\"p\", null, \"If you\\u2019ve noticed, in our Lambda function, we actually never ended the established DocumentDB connection, because we wanted to re-use it on every following call. But, after some time, this might cause problems because a number of active connections will rise, while the old connections are still alive (and not doing anything), and eventually you hit the limit of active connections. At that point, new connection attempts will be rejected, which is certainly undesirable.\"), mdx(\"p\", null, \"You can check the current state of connections by executing the following command inside of your DocumentDB cluster:\"), mdx(\"deckgo-highlight-code\", {\n    \"highlight-lines\": \"undefined\"\n  }, \"\\n          \", mdx(\"code\", {\n    parentName: \"deckgo-highlight-code\",\n    \"slot\": \"code\"\n  }, \"db.serverStatus().connections\\n\\n// Outputs the following:\\n{\\n  \\\"current\\\" : 16,\\n  \\\"available\\\" : 1143,\\n  \\\"totalCreated\\\" : 511\\n}\"), \"\\n        \"), mdx(\"p\", null, \"The same problem can also be found in the RDS world, where there are some solutions to mitigate this, like e.g., the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.npmjs.com/package/serverless-mysql\"\n  }, \"serverless-mysql\"), \" lib that actually has a built-in connection manager which handles this for you. Additionally, Serverless Aurora also received the \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://aws.amazon.com/about-aws/whats-new/2018/11/aurora-serverless-data-api-beta/\"\n  }, \"Data API\"), \", which abstracts connection management from us and let us interact with the database over an HTTP API.\"), mdx(\"p\", null, \"At Hoola AI, we will closely monitor this for now. If required, I might even try to tackle this problem in my spare time, in the form of a separate NPM package.\"), mdx(\"p\", null, \"We\\u2019ll see what time brings, but who knows; maybe we\\u2019ll see a serverless \\u2014 Data API \\u2014 powered DocumentDB in the near future? \\uD83D\\uDE09\"), mdx(\"p\", null, \"To finish this post, let\\u2019s see how we can establish a DocumentDB connection from a local machine.\"), mdx(\"h2\", {\n    \"id\": \"establish-a-connection-from-your-local-machine\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Establish a Connection From Your Local Machine\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#establish-a-connection-from-your-local-machine\",\n    \"aria-label\": \"establish a connection from your local machine permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"If you need to directly connect to the DocumentDB cluster from a local machine, you will need to do it via a jumpbox / SSH tunneling.\"), mdx(\"p\", null, \"It\\u2019s actually pretty simple to setup. You only need to create a simple EC2 instance (t2.micro will suffice) in the same VPC. Once it\\u2019s up and running, fire up your favorite MongoDB client; I like to use \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://studio3t.com/\"\n  }, \"Studio 3t\"), \".\"), mdx(\"p\", null, \"Make sure to correctly enter all of the necessary information and to attach the downloaded certificate file.\"), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"550px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/cb3229180dbfb00b3d229e51b3431380/dd45a/max-1100-1ze99Gqhq0R6yVzkHSwRRuw.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"29.000000000000004%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFklEQVQY0y3PyU7DMBgE4Lw3z8DbwAkkbkAW29maePkX201SmiJIGqReUQuf5jyaSaZhAB7vn7e7x8uD+hoCOEBiPp0+Q4zH4wwOvA/zPMcQnHPT4WOapnEYx2FMPHtEn7f7tBmqjq3WWhtjLBMhICGBA2cdITnrdK8RKPhAxIiUZGmeZ0Utc9e3Y/QAyMTWumk6bOdt+V7O69WyLOu6buu2LOvlZ3lq1he1T+qq1tpYY50FQvoLAhCRvwk+BP+PiQHwuh8jYEjyrLi+Yu/ZN3Wrtem7vtt1fa+7XXut7k1/o7Vpm+bt9b3bdQguhpDEEJmYiQlQFEIKJYRUQlZlJaXK00wKVRRCSSVlWapSFEWaZqIQRptfNaoz9yOB0TQAAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1100 1ze99Gqhq0R6yVzkHSwRRuw\",\n    \"title\": \"max 1100 1ze99Gqhq0R6yVzkHSwRRuw\",\n    \"src\": \"/static/cb3229180dbfb00b3d229e51b3431380/dd45a/max-1100-1ze99Gqhq0R6yVzkHSwRRuw.png\",\n    \"srcSet\": [\"/static/cb3229180dbfb00b3d229e51b3431380/772e8/max-1100-1ze99Gqhq0R6yVzkHSwRRuw.png 200w\", \"/static/cb3229180dbfb00b3d229e51b3431380/e17e5/max-1100-1ze99Gqhq0R6yVzkHSwRRuw.png 400w\", \"/static/cb3229180dbfb00b3d229e51b3431380/dd45a/max-1100-1ze99Gqhq0R6yVzkHSwRRuw.png 550w\"],\n    \"sizes\": \"(max-width: 550px) 100vw, 550px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"553px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/350fd8b38c01c2942658b2f88e5e9a1b/74cfa/max-1106-1HBAbplqdh4q1H5FGOCbmjw.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"44.99999999999999%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQozyWR226bQBRF+fm8tN9TKVIjNXlqgOFmM/c5cwcbl3FsFSI1TxV4a2trndezshhjCGEcRqOB2dO3n+vT8/L0vHx/WbGw0/kEoEHBOI7ee0ZZiHu8H4chAwVSSCUVZ4xz1XPXM3ek5kCNlMoYAwqEEKDA6I2ddTEEphxol+Eel0VZoarMUdu0FiRIrjjlFBOMpVSUEEYIoyzGeL1e5zktt/SjSXkfM8EFPvaEUA1ag7bGeeeddcHHNM8ppTTv3eEyXYY4nE/nyzTFELK2bl5/vVWotsYardumed9TFiXGmJIt+1Lc4xjjv6+va/rjffB+yIQQBBNQ4J032uBjj0pUoQqVqMiL/D3P82KDnQkm03QxGo4HbIzPKKF1Vdd1UxZIcGGtnef5c/1c/i7Lsqzruu2y7ud6v93TnD4+bvf7fYgxk0LiHhNMKGWgoEJV/jtv6qZp2q47dG3XdV2FKilV8CH4EMPm1jvvnc+ccc4+ao02GrTggjMuuBBcciZ22FQ9Pvrow9l/VePQDRXOhK4AAAAASUVORK5CYII=')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1106 1HBAbplqdh4q1H5FGOCbmjw\",\n    \"title\": \"max 1106 1HBAbplqdh4q1H5FGOCbmjw\",\n    \"src\": \"/static/350fd8b38c01c2942658b2f88e5e9a1b/74cfa/max-1106-1HBAbplqdh4q1H5FGOCbmjw.png\",\n    \"srcSet\": [\"/static/350fd8b38c01c2942658b2f88e5e9a1b/772e8/max-1106-1HBAbplqdh4q1H5FGOCbmjw.png 200w\", \"/static/350fd8b38c01c2942658b2f88e5e9a1b/e17e5/max-1106-1HBAbplqdh4q1H5FGOCbmjw.png 400w\", \"/static/350fd8b38c01c2942658b2f88e5e9a1b/74cfa/max-1106-1HBAbplqdh4q1H5FGOCbmjw.png 553w\"],\n    \"sizes\": \"(max-width: 553px) 100vw, 553px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"553px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/db9a4d5b7767df2b56c573fb197c540c/74cfa/max-1106-1Jr20JptKtisCs-3nCI-LbA.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"71.50000000000001%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB7ElEQVQoz22SaZKbMBCFuXmukkvkAMmMDTbCWAtGS2sHbE9+DIsnv1PALHYqqleqpoqW3vtaybmJXdOeuzMAXK7XGIKQCiSn0H378ef70+9glBDQNp2ztq5OMcYmtsGHtmmTY+0wqSpKCSaMMkYrjAmvudZGKquUsdpo0GbZQYHRZq2980lKwwFXjBBGGKOsYhXBBBR45521zlprvuSsWwujTfAhab2tKKWYMsoooQRjRmmBDhWr1p+MNvf9D80/cbNJiyJHWZbl+7zIC3zEm+dNWWLvvbPOO/95yt1ZS3MtrVQguOBCSAlCSCWV0VpK6dxsXCm4nC9vt9s4jv3r6zBOrZcnio1tk+BcgVC2na/d7/b5fr/ZbBEqsjRdPlG6TfMcrThjiDFEZ+0CJSTOOlCg5vEsUiCFXKSUVGstuKhPNa+FBr2Qn2PPtoMPFJPycMTlsUBz4PpUF3mOUDHHdj748Cnv/DqFd2AUk122S7dZus26thvHceiHoR/6vu+HYRqnR4236a1rvOTcuZiUZfn06xnlCEC/XF+maRqH8WsNDxr64TbdYvD1iXsXEw1acCEXyHPyJRUoAKU+CtBgVsOrrLEaFtv3A9SwvkS9gpml9Ack859HokG/413uny18AZeCy9XUqXZa/9v8FzjY0vBzEdRPAAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1106 1Jr20JptKtisCs 3nCI LbA\",\n    \"title\": \"max 1106 1Jr20JptKtisCs 3nCI LbA\",\n    \"src\": \"/static/db9a4d5b7767df2b56c573fb197c540c/74cfa/max-1106-1Jr20JptKtisCs-3nCI-LbA.png\",\n    \"srcSet\": [\"/static/db9a4d5b7767df2b56c573fb197c540c/772e8/max-1106-1Jr20JptKtisCs-3nCI-LbA.png 200w\", \"/static/db9a4d5b7767df2b56c573fb197c540c/e17e5/max-1106-1Jr20JptKtisCs-3nCI-LbA.png 400w\", \"/static/db9a4d5b7767df2b56c573fb197c540c/74cfa/max-1106-1Jr20JptKtisCs-3nCI-LbA.png 553w\"],\n    \"sizes\": \"(max-width: 553px) 100vw, 553px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, mdx(\"span\", {\n    parentName: \"p\",\n    \"className\": \"gatsby-resp-image-wrapper\",\n    \"style\": {\n      \"position\": \"relative\",\n      \"display\": \"block\",\n      \"marginLeft\": \"auto\",\n      \"marginRight\": \"auto\",\n      \"maxWidth\": \"555px\"\n    }\n  }, \"\\n      \", mdx(\"a\", {\n    parentName: \"span\",\n    \"className\": \"gatsby-resp-image-link\",\n    \"href\": \"/static/c1deac84d1fde3a17347b1865e7b13fa/cd039/max-1110-10-nmkIUe81f0V06vNCzNrA.png\",\n    \"style\": {\n      \"display\": \"block\"\n    },\n    \"target\": \"_blank\",\n    \"rel\": \"noopener\"\n  }, \"\\n    \", mdx(\"span\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-background-image\",\n    \"style\": {\n      \"paddingBottom\": \"46.5%\",\n      \"position\": \"relative\",\n      \"bottom\": \"0\",\n      \"left\": \"0\",\n      \"backgroundImage\": \"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkklEQVQoz02Q2arbMBRF/fd9Kv2eQulDIYkTbjxpsDUdSbZsp7F0PaW56VuJU0phsVmch7NhR23TuLq+9BcuuGvbvutoWRJa1o3rG3Mof376un7+Nn/5vuYlVJQYY51z1ljXuKhgNkMVynNUFKhAGJMiR5xxKaQUUgmlJMDG6yKFBAWgwGgT5cyliFGMMCIEE0qfCqBrW1tj/6e2f8VoAwqssREvyyxJknMihXRN03X9pb9Ya/+9N8YqqZQCAOCMZ2mmQQcfuraLMCL73f6w2ydJKqXSYMZxCuHdD4MfvPc++DC8fPAhhGHw7yEs89x3fUQQjg/xMT4d9rEGEIwLIb0Pt/W2Lsu6POOV8zxP0zRO8+PXEsv1R9FGJS1Px+Pb23lbQlcVo4RyLgWXjDHOBUjFmQAFg/fjOI7TfO1UmmPMXEQx3e12cXwSXAzX6+12W9dn1TOWZZk3tvb7/f5x/3g8fl86VxGidR1p0JxxzqUB2JP2nBFUFEVeEEwJJlmW51lGMM2zPE3Sqqxc44w2alv7D2+f1VDpIRP1AAAAAElFTkSuQmCC')\",\n      \"backgroundSize\": \"cover\",\n      \"display\": \"block\"\n    }\n  }), \"\\n  \", mdx(\"img\", {\n    parentName: \"a\",\n    \"className\": \"gatsby-resp-image-image\",\n    \"alt\": \"max 1110 10 nmkIUe81f0V06vNCzNrA\",\n    \"title\": \"max 1110 10 nmkIUe81f0V06vNCzNrA\",\n    \"src\": \"/static/c1deac84d1fde3a17347b1865e7b13fa/cd039/max-1110-10-nmkIUe81f0V06vNCzNrA.png\",\n    \"srcSet\": [\"/static/c1deac84d1fde3a17347b1865e7b13fa/772e8/max-1110-10-nmkIUe81f0V06vNCzNrA.png 200w\", \"/static/c1deac84d1fde3a17347b1865e7b13fa/e17e5/max-1110-10-nmkIUe81f0V06vNCzNrA.png 400w\", \"/static/c1deac84d1fde3a17347b1865e7b13fa/cd039/max-1110-10-nmkIUe81f0V06vNCzNrA.png 555w\"],\n    \"sizes\": \"(max-width: 555px) 100vw, 555px\",\n    \"style\": {\n      \"width\": \"100%\",\n      \"height\": \"100%\",\n      \"margin\": \"0\",\n      \"verticalAlign\": \"middle\",\n      \"position\": \"absolute\",\n      \"top\": \"0\",\n      \"left\": \"0\"\n    },\n    \"loading\": \"lazy\"\n  }), \"\\n  \"), \"\\n    \")), mdx(\"p\", null, \"With everything entered correctly, you should be able to connect successfully to your DocumentDB cluster.\"), mdx(\"h2\", {\n    \"id\": \"final-thoughts\",\n    \"style\": {\n      \"position\": \"relative\"\n    }\n  }, \"Final Thoughts\", mdx(\"a\", {\n    parentName: \"h2\",\n    \"href\": \"#final-thoughts\",\n    \"aria-label\": \"final thoughts permalink\",\n    \"className\": \"heading-link-anchor after\"\n  }, mdx(\"svg\", {\n    parentName: \"a\",\n    \"xmlns\": \"http://www.w3.org/2000/svg\",\n    \"fill\": \"none\",\n    \"viewBox\": \"0 0 24 24\",\n    \"stroke\": \"currentColor\"\n  }, \"\\n                              \", mdx(\"path\", {\n    parentName: \"svg\",\n    \"strokeLineCap\": \"round\",\n    \"strokeLineJoin\": \"round\",\n    \"strokeWidth\": \"2\",\n    \"d\": \"M7 20l4-16m2 16l4-16M6 9h14M4 15h14\"\n  }), \"\\n                            \"))), mdx(\"p\", null, \"Except the mentioned connection management issue, everything else seems to be working pretty well. I could write about our initial experiences, but I think I might save that for another post.\"), mdx(\"undefined\", null, mdx(\"blockquote\", {\n    \"className\": \"twitter-tweet\",\n    \"data-dnt\": \"true\"\n  }, mdx(\"p\", {\n    parentName: \"blockquote\",\n    \"lang\": \"en\",\n    \"dir\": \"ltr\"\n  }, \"For those starting out with \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/hashtag/aws?src=hash&ref_src=twsrc%5Etfw\"\n  }, \"#aws\"), \" \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/hashtag/DocumentDB?src=hash&ref_src=twsrc%5Etfw\"\n  }, \"#DocumentDB\"), \", have in mind that some aggregation pipeline operators like \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/search?q=%24facet&src=ctag&ref_src=twsrc%5Etfw\"\n  }, \"$facet\"), \" and \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/search?q=%24lookup&src=ctag&ref_src=twsrc%5Etfw\"\n  }, \"$lookup\"), \"  are not currently supported. Full list can be found here \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://t.co/9s3Udzrqp6\"\n  }, \"https://t.co/9s3Udzrqp6\")), \"\\u2014 Adrian Smijulj (@adrians5j) \", mdx(\"a\", {\n    parentName: \"blockquote\",\n    \"href\": \"https://twitter.com/adrians5j/status/1085253232966987776?ref_src=twsrc%5Etfw\"\n  }, \"January 15, 2019\")), \"\\n\\n\"), mdx(\"p\", null, \"Here at Hoola AI, we are certainly excited about the newest AWS addition and we\\u2019ll be using it to power our serverless CMS, which you will be able to check out \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.hoola.ai\"\n  }, \"here\"), \" in a couple of weeks from now. In the meantime, you can follow us via \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://twitter.com/WebinyCMS\"\n  }, \"Twitter\"), \" if you want to know more.\"), mdx(\"p\", null, \"I hope this article has helped you to successfully overcome these initial steps in your Lambda / DocumentDB journey. If you have any questions or you feel I\\u2019ve maybe forgotten to mention something, feel free to let me know!\"), mdx(\"hr\", null), mdx(\"p\", null, \"Thanks for reading! My name is Adrian and I work as a full stack developer at \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.hoola.ai\"\n  }, \"Hoola AI\"), \". In my spare time, I like to write about my experiences with some of the modern frontend and backend web development tools, hoping it might help other developers. If you have any questions, comments or just wanna say hi, feel free to reach out to me via \", mdx(\"a\", {\n    parentName: \"p\",\n    \"href\": \"https://www.twitter.com/doitadrian\"\n  }, \"Twitter\"), \".\"));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"author":"adrian","slug":"blog/connecting-to-aws-documentdb-from-a-lambda-function-2b666c9e4402","title":"Connecting to AWS DocumentDB from a Lambda function","description":"Start your AWS DocumentDB journey by learning how to establish a connection from a Lambda function and a local machine.","tags":["AWS","Serverless","DocumentDB","MongoDB","NodeJS"],"date":"January 24, 2019","featureImage":{"publicURL":"/static/19efc7d405b4409fafd8c3ec81302336/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png","childImageSharp":{"fluid":{"base64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAACsElEQVQozz2T61LqMBCAef9H8Cl0RGdQGYdBsIiU0ntLk97Tpm0CsUiKlOYM9pzz/drJZLNfdpOB+AfGWFVVx3EYY0KILMskSXp7e0MICSGOx+PlcumDuq7bthVCDAghvu9zzjVNm8/nuq4jhNgv6/U6iiIIISHk5+dntVpNp9MgCCzLOhwO1+SiKJIkCYJgs9lgjA3DQAhtNhv4SxiGiqJ4ntc0DULINE0hRNM0vewgjmNd14uiiKKIEPL4+Jhlme/7hmEQQmzb1nV9uVxCCGVZfnp6ghDati1J0vl8vmpHUVTXdVmWCCHXdRljaZpaluU4DqV0v98DALbbLaV0tVotFgtJkiil18r7/b4oCowxQihJEkJI13We5yGE8jwPgqAsS8MwFEU5HA4Iod1uxxjb7/fH43FAKbUsC0LoOE4URZZlGYaR5/n393cYhq7rQgiLonAc5/X11TAMzrnjOJqmNU0zqKrKtu3tL2EY+r7f30pV1f4gSunlcjmfz3meU0o9z1NVdbFY/NUGAJRlCSFcr9eEkDAMdV1XVTXPc875eDx+f38XQnx8fBRFIYTgnJdl2XXdIMuy+Xy+2WyqqlosFrZtJ0mSpinGuKoqzrlpmlmWCSEAAEEQEELqumaMXbV3u53neQAAQgjGeLlc5nkex7FpmoqiyLIsSZLnee0vAIDRaKQoysvLC4RwEIahLMue543H48lkEobhcDjsndM0jeN4NptNp9O6rjVNY4wlSQIh1DSNEHJNvr+/H41Gt7e3d3d3z8/PNzc3vu+fTqfZbMY5F0K0bev7/nA4BAC4rmtZFgDg6+vr2m1ZllVVVRRlu91aljWZTJIkYYw9PDzsdrv+Jdq2/fn52bYtpdQ0zX59UNc1xvh0Ov3/XgAASmk/575y13Wc867r/u/p4z9l5BxyfmlnUwAAAABJRU5ErkJggg==","aspectRatio":1.3157894736842106,"src":"/static/19efc7d405b4409fafd8c3ec81302336/ee604/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png","srcSet":"/static/19efc7d405b4409fafd8c3ec81302336/69585/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 200w,\n/static/19efc7d405b4409fafd8c3ec81302336/497c6/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 400w,\n/static/19efc7d405b4409fafd8c3ec81302336/ee604/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 800w,\n/static/19efc7d405b4409fafd8c3ec81302336/f3583/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 1200w,\n/static/19efc7d405b4409fafd8c3ec81302336/5707d/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 1600w,\n/static/19efc7d405b4409fafd8c3ec81302336/1cfdf/max-5376-1XG1Ww6K4VTmhiGY0qNQ-Bw.png 2688w","sizes":"(max-width: 800px) 100vw, 800px"}}}}}},"pageContext":{"slug":"blog/connecting-to-aws-documentdb-from-a-lambda-function-2b666c9e4402"}},"staticQueryHashes":["144257237"]}